(()=>{"use strict";const e=window.wp.hooks,o=window.wp.compose,t=window.wp.blockEditor,r=window.wp.components,c=window.wp.i18n,i=window.wp.data,l=window.ReactJSXRuntime;(0,e.addFilter)("blocks.registerBlockType","carmo-cover-block/acf-attributes",(e,o)=>"core/cover"!==o?e:{...e,attributes:{...e.attributes,acfDesktopFieldKey:{type:"string",default:""},acfMobileFieldKey:{type:"string",default:""}}});const n=(0,o.createHigherOrderComponent)(e=>o=>{if("core/cover"!==o.name)return(0,l.jsx)(e,{...o});const{attributes:n,setAttributes:s}=o,a=(0,i.useSelect)(e=>{if(!n.acfDesktopFieldKey)return"";const{getCurrentPostId:o,getCurrentPostType:t}=e("core/editor"),r=o(),c=t();if(!r||!c)return"";const i=e("core").getEntityRecord("postType",c,r);if(!i?.acf?.[n.acfDesktopFieldKey])return"";const l=i.acf[n.acfDesktopFieldKey];return"object"==typeof l&&l?.url?l.url:"string"==typeof l?l:""},[n.acfDesktopFieldKey]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e,{...o}),(0,l.jsx)(t.InspectorControls,{children:(0,l.jsxs)(r.PanelBody,{title:(0,c.__)("ACF Background Images","carmo-cover-block"),initialOpen:!1,children:[(0,l.jsx)(r.TextControl,{label:(0,c.__)("Desktop ACF Field Key","carmo-cover-block"),value:n.acfDesktopFieldKey,onChange:e=>s({acfDesktopFieldKey:e}),help:(0,c.__)("Enter the ACF field key for desktop background (e.g., field_63a1b2c3d4e5f).","carmo-cover-block")}),(0,l.jsx)(r.TextControl,{label:(0,c.__)("Mobile ACF Field Key","carmo-cover-block"),value:n.acfMobileFieldKey,onChange:e=>s({acfMobileFieldKey:e}),help:(0,c.__)("Optional. ACF field key for mobile background. If empty, desktop image is used on all devices.","carmo-cover-block")}),a&&(0,l.jsx)("p",{style:{fontStyle:"italic"},children:(0,c.__)("ACF desktop image detected.","carmo-cover-block")})]})})]})},"withACFControls");(0,e.addFilter)("editor.BlockEdit","carmo-cover-block/acf-controls",n)})();